wkhomeControllers.controller("exploreAuthor",["$routeParams","$scope","$rootScope","globalData","searchData","$window","sparqlQuery",function(a,o,t,r,e,n,c){$("html,body").animate({scrollTop:$("#scrollToTop").offset().top},"slow"),o.author="",o.authorId="",t.$on("CallParentMethod",function(a){o.clickonRelatedauthor(a)}),o.data="",clickonRelatedauthor=function(a){var t=r.PREFIX+" CONSTRUCT {   <"+a+"> foaf:name ?name; a foaf:Person   }    WHERE  {     <"+a+"> foaf:name ?name } ";c.querySrv({query:t},function(a){jsonld.compact(a,r.CONTEXT,function(a,t){o.$apply(function(){o.data=t})})})},o.ifrightClick=function(o){e.genericData=o,n.location.hash="/"+a.lang+"/w/cloud?datacloud"},null!=e.authorSearch&&1==e.authorSearch["@graph"].length&&clickonRelatedauthor(e.authorSearch["@graph"][0]["@id"]),searchAuthorInfo=function(a){var t=r.PREFIX+" CONSTRUCT {   <"+a+"> foaf:name ?name;  a foaf:Person;   foaf:publications  ?publications.  ?publications ?predicate ?object.  ?publications uc:contributor ?authorsName  }    WHERE  {     <"+a+"> foaf:name ?name.     <"+a+"> foaf:publications  ?publications.     ?publications ?predicate ?object.      ?authors foaf:publications ?publications.      ?authors foaf:name ?authorsName.          } ";c.querySrv({query:t},function(a){jsonld.compact(a,r.CONTEXT,function(a,t){o.$apply(function(){o.author=t["@graph"],o.authorId=t["@graph"][0]["@id"]})})})},o.numeroPub=function(a){return null!=a&&(a.constructor===Array||a instanceof Array)?a.length:1},o.$watch("searchData.authorSearch",function(a,t,r){if(e.authorSearch){var c=e.authorSearch["@graph"];if(c)if(c.length>1){var i=_.map(c,function(a){var o={};return o.id=a["@id"],o.name=a["foaf:name"],o.keyword="",a["dct:subject"]instanceof Array?_.map(a["dct:subject"],function(a,t){t<5&&(o.keyword=o.keyword+a+", ")}):o.keyword=a["dct:subject"],o});o.candidates=i,o.selectedAuthor=function(a,t){e.authorSearch["@graph"]=_.where(c,{"@id":t}),o.data=e.authorSearch,searchAuthorInfo(o.data["@graph"][0]["@id"]),$("#searchResults").modal("hide")},waitingDialog.hide(),$("#searchResults").modal("show")}else e.authorSearch["@graph"]=c,waitingDialog.hide(),searchAuthorInfo(e.authorSearch["@graph"][0]["@id"]);else alert("Information not found"),n.location.hash="/",waitingDialog.hide()}},!0)}]);